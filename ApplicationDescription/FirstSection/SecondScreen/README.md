**[← Back](./README.md)**
# Документация для электронного журнала для школы

## Структура данных

### 1. Users
Система поддерживает несколько типов пользователей:
- **Teacher** — имеет доступ к журналам, домашним заданиям, оценкам и расписаниям.
- **Pupils** — могут просматривать свои оценки, посещаемость и задания.
- **Parents** — могут контролировать успеваемость своих детей.
- **Administrators** — управлять системой и пользователями.

### 2. Таблицы базы данных

#### 2.1. `user` Table (Users)
Сохраняет информацию о пользователях системы:
- `id`: Идентификатор пользователя.
- `first_name`: Имя.
- `last_name`: Фамилия.
- `gender`: Пол.
- `birth_date`: Дата рождения.
- `email`: Email address.
- `password`: Пароль.
- `role_id`: Роль пользователя (ссылка на таблицу `role`).

#### 2.2. `role` Table (Roles)
Содержит роли пользователей:
- `id`: Идентификатор роли.
- `name`: Название роли (например, «Учитель», «Ученик», «Родитель», «Администратор»).

#### 2.3. `subject` Table (Subjects)
Содержит информацию по темам:
- `id`: Идентификатор предмета.
- `title`: Название предмета.
- `description`: Описание предмета.
- `teacher_id`: Идентификатор учителя (ссылка на таблицу `user`).
- `credit_hours`: Количество академических часов.

#### 2.4. `lesson` Table (Lessons)
Содержит информацию об уроках:
- `id`: Идентификатор урока.
- `subject_id`: Тема (ссылка на таблицу `subject`).
- `class_id`: Класс (ссылка на таблицу `schoolClass`).
- `quarter_id`: Квартал (ссылка на таблицу `квартал`).
- `date`: Дата урока.

#### 2.5. `attendance` Table (Attendance)
Отслеживает посещаемость занятий учениками:
- `id`: Идентификатор записи.
- `lesson_id`: Урок (ссылка на таблицу `урок`).
- `student_id`: Студент (ссылка на таблицу `user`).
- `status`: Статус присутствия (например, «Присутствует», «Отсутствует»).

#### 2.6. `grade` Table (Grades)
Содержит оценки учащихся:
- `id`: Идентификатор записи.
- `lesson_id`: Урок (ссылка на таблицу `урок`).
- `student_id`: Студент (ссылка на таблицу `user`).
- `grade`: Оценка.

#### 2.7. `homework` Table (Homework)
Содержит информацию о домашних заданиях:
- `id`: Идентификатор назначения.
- `subject_id`: Тема (ссылка на таблицу `subject`).
- `teacher_id`: Учитель (ссылка на таблицу `user`).
- `description`: Описание задания.
- `due_date`: Срок оплаты.

### 3. REST API

#### 3.1. Аутентификация и авторизация
Для доступа к системе используются токены JWT.

##### 3.1.1. Регистрация пользователя
**POST** `/api/auth/register`
- **Request Parameters**:
  - `first_name`: Имя пользователя.
  - `last_name`: Фамилия пользователя.
  - `email`: Адрес электронной почты пользователя.
  - `password`: Пароль пользователя.
- **Response**:
  - Статус 200: Успешная регистрация.

##### 3.1.2. User Login
**POST** `/api/auth/login`
- **Request Parameters**:
  - `email`: Адрес электронной почты пользователя.
  - `password`: Пароль пользователя.
- **Response**:
  - Статус 200: Возвращает токен JWT.

#### 3.2. Управление журналом

##### 3.2.1. Получить все уроки для класса
**GET** `/api/classes/{classId}/lessons`
- **Response**:
  - Статус 200: Список уроков для указанного класса.

##### 3.2.2. Добавить оценку
**POST** `/api/grades`
- **Request Parameters**:
  - `lesson_id`: Идентификатор урока.
  - `student_id`: Идентификатор студента.
  - `grade`: Оценка.

#### 3.3. Управление посещаемостью

##### 3.3.1. Get Attendance for a Lesson
**GET** `/api/attendance/{lessonId}`
- **Response**:
  - Статус 200: Список посещающих указанный урок.

##### 3.3.2. Add Attendance
**POST** `/api/attendance`
- **Request Parameters**:
  - `lesson_id`: Идентификатор урока.
  - `student_id`: Идентификатор студента.
  - `status`: Статус присутствия («Присутствует», «Отсутствует»).

### Развертывание
1. Создание файлов `Dockerfile` и `docker-compose.yml`.
2. Сборка и запуск контейнеров локально для проверки: docker-compose up --build
3. Создание нового Web Service на render.com:
- Указание ссылки на репозиторий с проектом.
- Настройка переменных окружения (параметры подключения к базе данных).
- После завершения деплоя приложение будет доступно по сгенерированному публичному адресу.

## Роли и полномочия
Приложение поддерживает роли пользователей, каждая из которых имеет определенные привилегии:
- **Administrator** — управляет всеми аспектами приложения.
- **Teacher** — управляет предметами, уроками, оценками и домашними заданиями.
- **Pupil** — могут просматривать свои оценки, посещаемость и задания.
- **Parent** — могут отслеживать успеваемость своих детей.

## Заключение
Электронный журнал представляет собой эффективный интерфейс для управления учебной документацией в школах, предлагая различные уровни доступа для пользователей системы.
